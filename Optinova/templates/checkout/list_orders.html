{% extends "admin_page/main.html" %}
{% load static %}

{% block content %}
<!-- Updated Order Management Page with Light Color Theme -->
<main class="main-wrap">

    <div class="container">
        <h2 class="text-center mb-5" style="color: #4a4a4a; font-family: 'Poppins', sans-serif;">Order Management</h2>

        <!-- Orders Table -->
        <div class="table-responsive">
            <table class="table table-bordered table-hover">
                <thead class="thead-light" style="background-color: #f0f0f0; color: #333;">
                    <tr>
                        <th scope="col">Order ID</th>
                        <th scope="col">User</th>
                        <th scope="col">Status</th>
                        <th scope="col">Payment Method</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr class="{% if forloop.counter|divisibleby:2 %}table-light{% else %}table-secondary{% endif %}">
                        <td>#{{ order.id }}</td>
                        <td>{{ order.user.username }}</td>
                        <td>
                            <span class="badge badge-status">{{ order.status }}</span>
                        </td>
                        <td>{{ order.payment_method }}</td>
                        <td>
                            <!-- Update Status Form -->
                            <form action="{% url 'update_order_status' order.id %}" method="post" class="d-inline">
                                {% csrf_token %}
                                <select name="status" class="form-control form-control-sm" onchange="this.form.submit()">
                                    <option value="Pending" {% if order.status == 'Pending' %}selected{% endif %}>Pending</option>
                                    <option value="Processing" {% if order.status == 'Processing' %}selected{% endif %}>Processing</option>
                                    <option value="Shipped" {% if order.status == 'Shipped' %}selected{% endif %}>Shipped</option>
                                    <option value="Delivered" {% if order.status == 'Delivered' %}selected{% endif %}>Delivered</option>
                                    <option value="Cancelled" {% if order.status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
                                </select>
                            </form>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center" style="color: #7d7d7d;">No orders found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</main>

<!-- Load FontAwesome icons for buttons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Add custom styles to enhance appearance -->
<style>
    .main-wrap {
        background-color: #f8f9fa;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .table thead {
        background-color: #f0f0f0; /* Light gray header */
        color: #333;
    }
    .table-hover tbody tr:hover {
        background-color: #e0e0e0; /* Light gray hover effect */
    }
    .badge-status {
        background-color: #e0e0e0; /* Light gray badge */
        color: #333;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 14px;
    }
    .btn-primary {
        background-color: #007bff;
        color: white;
        border-radius: 25px;
        padding: 8px 16px;
        text-transform: uppercase;
        font-weight: bold;
    }
    .btn-primary:hover {
        background-color: #0056b3;
    }
    .btn-danger {
        background-color: #dc3545;
        color: white;
        border-radius: 25px;
        padding: 8px 16px;
        text-transform: uppercase;
        font-weight: bold;
    }
    .btn-danger:hover {
        background-color: #c82333;
    }
    .text-center {
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
        color: #4a4a4a;
    }
    .table-secondary {
        background-color: #fafafa; /* Very light gray alternate row */
    }
</style>

{% endblock content %}
